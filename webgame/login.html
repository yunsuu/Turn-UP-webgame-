<script src="./static/anime-master/anime-master/lib/anime.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<div id="anime-login">

    <div class="layout">
        <div class="line" onclick="location.href='/login'">
            <span style="
            color:#a1d99b;
            font-style:silom;
            font-weight: bold;
            font-size: 10em;
            line-height: 1.0em;
            font-family: arial;
            " ;>Turn</span>

            <span style="
            color:#998ec3;
            font-style:silom;
            font-weight: bold;
            font-size: 10em;
            line-height: 1.0em;
            font-family: arial;
            " ;>up!</span>
        </div>
        <div class="line" id="blocktutorial" style="display: inline-block;">
            <div class="square" id="_1_1" name='0'>
                <img id="img_1_1" src="invisible.png">
            </div>

            <div class="square" id="_1_2" name='0'>
                <img id="img_1_2" src="invisible.png">
            </div>

            <div class="square" id="_1_3" name='0' input type="text" id="input">
                <img id="img_1_3" src="invisible.png">
            </div>

            <div class="line">
                <div class="square" id="_2_1" name='0'>
                    <img id="img_2_1" src="invisible.png">

                </div>
                <div class="square" id="_2_2" name='0'>
                    <img id="img_2_2" src="playbtn.png">

                </div>
                <div class="square" id="_2_3" name='0'>
                    <img id="img_2_3" src="invisible.png">

                </div>
            </div>
            <div class="line">
                <div class="square" id="_3_1" name='0'>
                    <img id="img_3_1" src="invisible.png">

                </div>
                <div class="square" id="_3_2" name='0'>
                    <img id="img_3_2" src="invisible.png">

                </div>
                <div class="square " class="square " id="_3_3" name='0'>
                    <img id="img_3_3" src="invisible.png">

                </div>
            </div>
        </div>

        <div class="controls" id="login1" style="display:none;">
            <button class="play-blue" style="font-size:30px;">Login</button>
            <button class="play-blue-red" style="font-size:30px;">Join Us</button>

        </div>

        <div class="line" id="loginbox" style="display:none;">

            <form action="./login" method="POST" class="loginform" id="_0_0" style="font-size:20px;">
                <br><br><br> ID: <input name="id" type="text" id="ID" contenteditable="true" maxlength='8' />
                <br><br> PW: <input name="pwd" type="password" id="PW" contenteditable="true" maxlength='8' />
                <br>
                <button type="submit" class="loginbtn" style="margin: 15px;padding: 10px; font-size:25px;">Login</button>
            </form>
        </div>
        <div class="line" id="joinusbox" style="display:none;">

            <form action="./signup" method="POST" class="joinusform" id="_0_1" style="font-size:20px;">
                <br> ID: <input name="id" type="text" id="JID" contenteditable="true" maxlength='8' />
                <br>
                <button class="joinusidbtn" style="margin: 15px;padding: 10px; font-size:25px;">Confirm</button>
                <img src="checkicon.png" id="idconfirm" style="width:40px; height:40px; display:none;">
                <br> PW: <input name="pwd1" type="password" id="JPW" contenteditable="true" maxlength='8' />
                <br> PW: <input name="pwd2" type="password" id="JPW" contenteditable="true" maxlength='8' />
                <br>
                <button type="submit" class="joinuspwbtn"  style="margin: 15px;padding: 10px; font-size:25px;">Join Us</button>
                <img src="checkicon.png" id="pwconfirm" style="width:40px; height:40px; display:none;">
            </form>
        </div>
    </div>
</div>
<style>
    button {
        background: #a1d99b;
        color: white;
        margin: 20px;
        padding: 40px;
        border-radius: 4px;
        font-family: 'Lato';
        cursor: pointer;
        border: none;
        outline: none;
        transition: all ease 0.1s;
    }

    button:hover {
        background: #998ec3;
        transform: scale( 1.3);
    }

    body {
        margin: 0px;
        font-family: 'Lato';
        font-weight: 300;
        text-align: center;
        font-size: 1.2em;
        background: white;
    }

    .square {
        position: relative;
        width: 120px;
        height: 120px;
        background-color: #a1d99b;
        display: inline-block;
        border: 4px;
        border-radius: 20%;
        cursor: pointer;
        transform-origin: center;
        transition: width 80ms, height 80ms;
    }

    .square:hover {
        background: hotpink;
    }

    .loginform {
        position: absolute;
        width: 250px;
        height: 250px;
        background-color: #a1d99b;
        display: inline-block;
        border: 4px;
        border-radius: 20%;
        top: 65%;
        left: 49%;
        transform: translate(-50%, -50%);
        transition: all ease 0.1s;
    }

    .joinusform {
        position: absolute;
        width: 250px;
        height: 250px;
        background-color: #a1d99b;
        display: inline-block;
        border: 4px;
        border-radius: 20%;
        top: 65%;
        left: 49%;
        transform: translate(-50%, -50%);
        transition: all ease 0.1s;
    }

    .controls {
        margin-top: 0px;
    }

    .square img {
        position: absolute;
        top: 20;
        left: 21;
        width: 70%;
        height: 70%;
    }

    .IDPW {
        position: absolute;
        width: 80px;
    }
</style>




<script>
    //받아온 값이 빈값인지 아닌지 판단해주는 함수
    function isEmpty(str) {

        if (typeof str == "undefined" || str == null || str == "")
            return true;
        else
            return false;
    }

    //div name속성 기준으로 어떤색으로 색을 칠해야할지 정해주는 함수
    function judgeColor(i, j) {
        _name = $(`#_${i}_${j}`).attr('name');
        if (parseFloat(_name) == 1) return '#998ec3';
        else if (parseFloat(_name) == 0) return '#a1d99b';
    }

    //div name속성 바꾸기, 1이면 0으로 바꾸고 0이면 1로 바꾸기!
    function changeName(i, j) {
        _name = $(`#_${i}_${j}`).attr('name');
        if (isEmpty(_name)) return;
        if (parseInt(_name) == 0) {
            $(`#_${i}_${j}`).attr('name', '1');
        } else if (parseInt(_name) == 1) {
            $(`#_${i}_${j}`).attr('name', '0');
        }
    }

    function changeNameValues(i, j) {
        changeName(i, j);
        changeName(i - 1, j);
        changeName(i + 1, j);
        changeName(i, j - 1);
        changeName(i, j + 1);
    }

    //클릭했을때 십자모양으로 뒤집는 에니매이션
    function reverseAni(i, j, n) {
        changeNameValues(i, j);

        var reversecolors = anime.timeline({
            easing: 'easeOutExpo',
            direction: '750',
            autoplay: false
        })
        for (k = i - n; k <= i + n; k++) {
            if (k == i) continue;
            reversecolors.add({
                targets: `#_${k}_${j}`,
                background: judgeColor(k, j)
            }, 0)
        }
        for (k = j - n; k <= j + n; k++) {
            if (k == j) continue;
            reversecolors.add({
                targets: `#_${i}_${k}`,
                background: judgeColor(i, k)
            }, 0)
        }
        reversecolors.add({
            targets: `#_${i}_${j}`,
            background: judgeColor(i, j)
        }, 0).play();
    }

    var x = 0; //처음 튜토리얼 순서 카운트
    var y = 0; //마우스오버시 스퀘어 커지는 애니메이션 반복용
    var c = null; //마우스오버시 스퀘어 커지는 애니메이션 리셋용
    var z = 0; //싱글플레이 멀티플레이 확인용 0=싱글 1=멀티
    var jin = 0; //회원가입시 아이디 비밀번호 컨펌이 되었는지 확인


    //blocktutorial사각형이 클릭됐을때 실행되는 동작들
    $('.square').click(function() {
        var a = $(this).attr('id');
        var click_i = parseInt(a[1]);
        var click_j = parseInt(a[3]);

        if (a[1] == 2 && a[3] == 2 && x == 0) {
            reverseAni(click_i, click_j, 1);
            document.getElementById("img_2_2").src = "invisible.png";
            document.getElementById("img_1_1").src = "click.png";
            x++;

        } else if (a[1] == 1 && a[3] == 1 && x == 1) {
            reverseAni(click_i, click_j, 1);
            document.getElementById("img_1_1").src = "invisible.png";
            document.getElementById("img_3_3").src = "click.png";
            x++;
        } else if (a[1] == 3 && a[3] == 3 && x == 2) {
            reverseAni(click_i, click_j, 1);
            document.getElementById("img_3_3").src = "invisible.png";
            document.getElementById("img_1_3").src = "click.png";
            x++;
        } else if (a[1] == 1 && a[3] == 3 && x == 3) {
            reverseAni(click_i, click_j, 1);
            document.getElementById("img_1_3").src = "invisible.png";
            document.getElementById("img_3_1").src = "click.png";
            x++;

        } else if (a[1] == 3 && a[3] == 1 && x == 4) {
            reverseAni(click_i, click_j, 1);
            document.getElementById("img_3_1").src = "invisible.png";
            document.getElementById("img_2_2").src = "clear.png";
            document.getElementById("login1").style.display = 'inline-block';
            x++;
        }
    });
    //blocktutorial스퀘어에 마우스 오버시 스퀘어 커지는 애니메이션
    $('.square').hover(function() {
        var b = $(this).attr('id');
        var hover_i = parseInt(b[1]);
        var hover_j = parseInt(b[3]);

        console.log(b, c, y)
        if (y == 0) {
            document.getElementById(b).style.width = '130px';
            document.getElementById(b).style.height = '130px';
            if (c != null) {
                document.getElementById(c).style.width = '120px';
                document.getElementById(c).style.height = '120px';
            }
            c = b;
            y++;
        } else if (y == 1) {

            document.getElementById(c).style.width = '120px';
            document.getElementById(c).style.height = '120px';
            document.getElementById(b).style.width = '130px';
            document.getElementById(b).style.height = '130px';
            c = b;
            y--;
        }
    });

    //버튼동작 모음
    $('.play-blue').click(function() {

        document.getElementById("blocktutorial").style.display = 'none';
        document.getElementById("joinusbox").style.display = 'none';
        document.getElementById("loginbox").style.display = 'inline-block';

    });
    $('.play-blue-red').click(function() {
        document.getElementById("blocktutorial").style.display = 'none';
        document.getElementById("joinusbox").style.display = 'inline-block';
        document.getElementById("loginbox").style.display = 'none';

    });
    $('.loginbtn').click(function() {

        location.href = "choosetype.html";
        //아이디 비밀번호 맞는지 체크
        //싱글플레이 멀티플레이 고르는 html 하이퍼링크

    });
    $('.joinusidbtn').click(function() {
        //사용가능한 아이디인지 확인
        document.getElementById("idconfirm").style.display = 'inline-block';
        jin++;
    });
    $('.joinuspwbtn').click(function() {
        //두번 입력한 비밀번호가 맞는지 확인하고 맞으면 새로고침
        if (jin >= 1 /*&&pw1 pw2동일하면*/ ) {
            document.getElementById("pwconfirm").style.display = 'inline-block';
        }
        location.href = "AniLogin.html";

    });
    $('.sgmtswitch').click(function() {
        //싱글플레이멀티플레이 전환
        if (z == 0) { //싱글플레이

            document.getElementById("blocksingle").style.display = 'none';
            document.getElementById("blockmulti").style.display = 'inline-block';
            z = 1;
        } else if (z == 1) { //멀티플레이

            document.getElementById("blocksingle").style.display = 'inline-block';
            document.getElementById("blockmulti").style.display = 'none';
            z = 0;
        }

    });
</script>